#!/bin/bash

# 1. Define the list of Pokemon
# We use a simple space-separated string for the loop
POKEMON_LIST="Bulbasaur Ivysaur Venusaur Charmander Charmeleon"

# 2. Create the output directory if it doesn't exist
# -p ensures no error if the folder already exists
mkdir -p pokemon_data

# 3. Loop through each name in the list
for pokemon in $POKEMON_LIST; do
    
    # Convert name to lowercase for the API and Filename
    # ${variable,,} is a Bash feature that converts text to lowercase
    lower_name="${pokemon,,}"
    
    # Print the "Fetching" message
    echo "Fetching data for ${lower_name}..."
    
    # Make the API request
    # -s: Silent (no progress bar)
    # -f: Fail on error (404/500)
    # -o: Output to the specific file path
    curl -s -f -o "pokemon_data/${lower_name}.json" "https://pokeapi.co/api/v2/pokemon/${lower_name}"
    
    # Check if the curl command was successful
    if [ $? -eq 0 ]; then
        echo "Saved data to pokemon_data/${lower_name}.json âœ…"
    else
        echo "Failed to fetch data for ${lower_name}"
    fi
    
    # 4. Rate Limiting
    # Pause for 2 seconds between requests to be polite to the API
    sleep 2
    
done